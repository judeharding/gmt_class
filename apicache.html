<!DOCTYPE html>
<html>

<head>
    <title>API Cache</title>

    <style type="text/css">
        body {
            margin: 1em auto;
            max-width: 40em;
            width: 88%;
        }
    </style>
</head>

<body>

    <h1>API Cache</h1>
    <p><em><strong>The Scuttlebutt</strong>&mdash;the number one source for pirate news!</em></p>

    <div id="app">
        Loading...
    </div>

    <script>

        var app = document.querySelector("#app");

        // var articles;

        var render = function (results) {
            console.log("JSON OBJ...", results.articles);

            // app.innerHTML = "hello... ";

            app.innerHTML = results.articles.map(function (item) {
                var html =
                    '<article>' +
                    '<h2>' + item.title + '</h2>' +
                    '<p>' + item.author + '</p>' +
                    '<p>' + item.article + '</p>' +
                    '<p>' + item.pubdate + '</p>' +
                    '<p>' + item.category + '</p>' +
                    '</article>';
                return html;
            }).join('');


        };

        fetch('https://vanillajsacademy.com/api/pirates.json')
            .then(function (response) {
                if (response.ok) {
                    console.log("ok");
                    return response.json();
                } else {
                    console.log("not ok");
                    return Promise.reject(response);
                }
            }).then(function (data) {

                // console.log("data from the 2nd then... ", data);

                render(data);


            }).catch(function (error) {
                app.textContent = '[Something went wrong, sorry!] .';
            });

    </script>
</body>

</html>