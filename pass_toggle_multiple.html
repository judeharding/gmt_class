<!DOCTYPE html>
<html>

<head>
    <title>Password Visibility - Multiple Fields</title>

    <style type="text/css">
        body {
            margin: 1em auto;
            max-width: 40em;
            width: 88%;
        }

        label {
            display: block;
            width: 100%;
        }

        input {
            margin-bottom: 1em;
        }

        [type="checkbox"] {
            margin-bottom: 0;
            margin-right: 0.25em;
        }
    </style>
</head>

<body>

    <h1>Password Visibility - Multiple Fields</h1>

    <p>Enter your current password and new password below.</p>

    <form>
        <div>
            <label for="current-password">Current Password</label>
            <input type="password" name="current-password" class="pass" id="current-password">
        </div>

        <div>
            <label for="new-password">New Password</label>
            <input type="password" name="new-password" class="pass" id="new-password">
        </div>

        <div>
            <label for="show-passwords">
                <input type="checkbox" name="show-passwords" id="show-passwords">
                Show passwords
            </label>
        </div>

        <p>
            <button type="submit">Change Passwords</button>
        </p>
    </form>

    <script>

        // var passwords = Array.prototype.slice.call(document.querySelectorAll("[type='password']"));
        var passwords = document.querySelectorAll("[type='password']"); // THIS IDEA WORKS 
        var toggle = document.querySelector("#show-passwords");

        toggle.addEventListener("click", function (event) {
            passwords.forEach(function (password) {
                if (toggle.checked) {
                    password.type = "text";
                } else {
                    password.type = "password"
                }
            });
        }, false);


        // MINE DOESN'T WORK EXCEPT ON THE FIRST CLASS=PASS
        // var passwords = document.querySelectorAll(".pass"); // no good
        // var passwords = document.querySelectorAll("[type='password']"); // no godd
        // var toggle = document.querySelector("#show-passwords");

        // toggle.addEventListener("click", function (event) {
        //     if (toggle.checked) {
        //         passwords.type = "text";
        //     } else {
        //         passwords.type = "password"
        //     }
        // }, false);

    </script>
</body>

</html>